# ç½‘ä¸Šå•†åŸç³»ç»Ÿ - ä½¿ç”¨è¯´æ˜æ–‡æ¡£

> è¯¦ç»†çš„å®‰è£…ã€é…ç½®ã€ä½¿ç”¨å’Œé—®é¢˜æ’æŸ¥æŒ‡å—

---

## ğŸ“‹ ç›®å½•

1. [ç¯å¢ƒå‡†å¤‡](#ç¯å¢ƒå‡†å¤‡)
2. [å®‰è£…éƒ¨ç½²](#å®‰è£…éƒ¨ç½²)
3. [å¿«é€Ÿå¼€å§‹](#å¿«é€Ÿå¼€å§‹)
4. [åŠŸèƒ½ä½¿ç”¨æŒ‡å—](#åŠŸèƒ½ä½¿ç”¨æŒ‡å—)
5. [APIæ¥å£ä½¿ç”¨](#apiæ¥å£ä½¿ç”¨)
6. [æµ‹è¯•è´¦å·](#æµ‹è¯•è´¦å·)
7. [å¸¸è§é—®é¢˜](#å¸¸è§é—®é¢˜)
8. [æ€§èƒ½ä¼˜åŒ–](#æ€§èƒ½ä¼˜åŒ–)
9. [æ‰©å±•å¼€å‘](#æ‰©å±•å¼€å‘)

---

## ç¯å¢ƒå‡†å¤‡

### å¿…éœ€è½¯ä»¶

#### 1. Pythonç¯å¢ƒ

**ç‰ˆæœ¬è¦æ±‚**ï¼šPython 3.9 æˆ–æ›´é«˜ç‰ˆæœ¬

**å®‰è£…éªŒè¯**ï¼š
```bash
# æ£€æŸ¥Pythonç‰ˆæœ¬
python --version
# è¾“å‡ºç¤ºä¾‹ï¼šPython 3.9.7

# æ£€æŸ¥pipç‰ˆæœ¬
pip --version
# è¾“å‡ºç¤ºä¾‹ï¼špip 21.2.4
```

**Windowså®‰è£…**ï¼š
1. è®¿é—® https://www.python.org/downloads/
2. ä¸‹è½½Python 3.9+å®‰è£…åŒ…
3. å®‰è£…æ—¶å‹¾é€‰"Add Python to PATH"
4. éªŒè¯å®‰è£…ï¼šæ‰“å¼€cmdï¼Œè¿è¡Œ`python --version`

**Linuxå®‰è£…**ï¼š
```bash
# Ubuntu/Debian
sudo apt update
sudo apt install python3.9 python3-pip

# CentOS/RHEL
sudo yum install python39 python39-pip
```

#### 2. MySQLæ•°æ®åº“

**ç‰ˆæœ¬è¦æ±‚**ï¼šMySQL 8.0 æˆ–æ›´é«˜ç‰ˆæœ¬

**å®‰è£…éªŒè¯**ï¼š
```bash
# æ£€æŸ¥MySQLç‰ˆæœ¬
mysql --version
# è¾“å‡ºç¤ºä¾‹ï¼šmysql Ver 8.0.28
```

**Windowså®‰è£…**ï¼š
1. è®¿é—® https://dev.mysql.com/downloads/installer/
2. ä¸‹è½½MySQL Installer
3. å®‰è£…æ—¶è®¾ç½®rootå¯†ç ï¼ˆè¯·è®°ä½ï¼‰
4. å¯åŠ¨MySQLæœåŠ¡

**å¯åŠ¨MySQLæœåŠ¡**ï¼š
```bash
# Windows
net start MySQL80

# Linux
sudo systemctl start mysql
```

#### 3. Node.jsï¼ˆå‰ç«¯å¼€å‘ï¼‰

**ç‰ˆæœ¬è¦æ±‚**ï¼šNode.js 16 æˆ–æ›´é«˜ç‰ˆæœ¬

**å®‰è£…éªŒè¯**ï¼š
```bash
# æ£€æŸ¥Node.jsç‰ˆæœ¬
node --version
# è¾“å‡ºç¤ºä¾‹ï¼šv16.14.0

# æ£€æŸ¥npmç‰ˆæœ¬
npm --version
# è¾“å‡ºç¤ºä¾‹ï¼š8.3.1
```

**å®‰è£…**ï¼š
1. è®¿é—® https://nodejs.org/
2. ä¸‹è½½LTSç‰ˆæœ¬
3. é»˜è®¤å®‰è£…å³å¯

### å¯é€‰è½¯ä»¶

#### 1. Dockerï¼ˆæ¨èï¼‰

**ç”¨é€”**ï¼šå®¹å™¨åŒ–éƒ¨ç½²ï¼Œä¸€é”®å¯åŠ¨æ‰€æœ‰æœåŠ¡

**å®‰è£…**ï¼š
- Windows/Macï¼šhttps://www.docker.com/products/docker-desktop
- Linuxï¼š`sudo apt install docker.io docker-compose`

#### 2. Postman

**ç”¨é€”**ï¼šAPIæµ‹è¯•å·¥å…·

**å®‰è£…**ï¼šhttps://www.postman.com/downloads/

#### 3. MySQL Workbench

**ç”¨é€”**ï¼šæ•°æ®åº“ç®¡ç†å·¥å…·

**å®‰è£…**ï¼šhttps://dev.mysql.com/downloads/workbench/

#### 4. VS Code

**ç”¨é€”**ï¼šä»£ç ç¼–è¾‘å™¨

**å®‰è£…**ï¼šhttps://code.visualstudio.com/

---

## å®‰è£…éƒ¨ç½²

### æ–¹å¼ä¸€ï¼šå¿«é€Ÿå¯åŠ¨ï¼ˆæ¨èæ–°æ‰‹ï¼‰

#### Windowsç”¨æˆ·

**Step 1: å‡†å¤‡é¡¹ç›®**
```powershell
# è¿›å…¥é¡¹ç›®ç›®å½•
cd d:\PyCharm\code\pythonProject2\sqlwork
```

**Step 2: åˆå§‹åŒ–æ•°æ®åº“**
```bash
# è¿æ¥MySQLï¼ˆè¾“å…¥rootå¯†ç ï¼‰
mysql -u root -p

# åœ¨MySQLå‘½ä»¤è¡Œä¸­æ‰§è¡Œï¼š
source database/schema.sql
source database/seed_data.sql

# éªŒè¯æ•°æ®
USE online_mall;
SHOW TABLES;
SELECT COUNT(*) FROM products;  # åº”è¿”å›30
```

**Step 3: è¿è¡Œå¯åŠ¨è„šæœ¬**
```powershell
# æ‰§è¡Œå¯åŠ¨è„šæœ¬
.\start.ps1
```

è„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- âœ… æ£€æŸ¥Pythonå’ŒMySQL
- âœ… å®‰è£…Pythonä¾èµ–
- âœ… å¯åŠ¨åç«¯æœåŠ¡

**Step 4: è®¿é—®æœåŠ¡**
- APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
- æµ‹è¯•é¡µé¢ï¼šæ‰“å¼€é¡¹ç›®æ ¹ç›®å½•çš„ `index.html`

#### Linux/Macç”¨æˆ·

```bash
# 1. åˆå§‹åŒ–æ•°æ®åº“
mysql -u root -p < database/schema.sql
mysql -u root -p < database/seed_data.sql

# 2. å®‰è£…ä¾èµ–
cd backend
pip install -r requirements.txt

# 3. é…ç½®ç¯å¢ƒå˜é‡
cp .env.example .env
# ç¼–è¾‘.envæ–‡ä»¶ï¼Œä¿®æ”¹æ•°æ®åº“å¯†ç 

# 4. å¯åŠ¨æœåŠ¡
python main.py
```

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨å®‰è£…ï¼ˆæ¨èæœ‰ç»éªŒç”¨æˆ·ï¼‰

#### 1. å…‹éš†é¡¹ç›®ï¼ˆå¦‚æœä»Gitè·å–ï¼‰

```bash
git clone <repository_url>
cd sqlwork
```

#### 2. åˆ›å»ºPythonè™šæ‹Ÿç¯å¢ƒ

```bash
# è¿›å…¥åç«¯ç›®å½•
cd backend

# åˆ›å»ºè™šæ‹Ÿç¯å¢ƒ
python -m venv venv

# æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
# Windows
venv\Scripts\activate

# Linux/Mac
source venv/bin/activate
```

#### 3. å®‰è£…Pythonä¾èµ–

```bash
# ä½¿ç”¨å›½å†…é•œåƒæºåŠ é€Ÿ
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple

# æˆ–è€…ä½¿ç”¨é»˜è®¤æº
pip install -r requirements.txt
```

**ä¾èµ–åˆ—è¡¨**ï¼š
```
fastapi==0.109.0
uvicorn[standard]==0.27.0
sqlalchemy==2.0.25
pymysql==1.1.0
cryptography==42.0.0
python-jose[cryptography]==3.3.0
passlib[bcrypt]==1.7.4
python-multipart==0.0.6
pydantic==2.5.3
pydantic-settings==2.1.0
email-validator==2.1.1
python-dotenv==1.0.0
scikit-learn==1.4.0
numpy==1.26.3
pandas==2.2.0
requests==2.31.0
```

#### 4. é…ç½®ç¯å¢ƒå˜é‡

```bash
# å¤åˆ¶é…ç½®æ¨¡æ¿
cp .env.example .env

# ç¼–è¾‘.envæ–‡ä»¶
nano .env  # æˆ–ä½¿ç”¨å…¶ä»–ç¼–è¾‘å™¨
```

**.envæ–‡ä»¶å†…å®¹**ï¼š
```env
# æ•°æ®åº“é…ç½®
DATABASE_URL=mysql+pymysql://root:your_password@localhost:3306/online_mall

# JWTé…ç½®
SECRET_KEY=your-secret-key-change-in-production
ALGORITHM=HS256
ACCESS_TOKEN_EXPIRE_MINUTES=1440

# CORSé…ç½®
CORS_ORIGINS=["http://localhost:5173", "http://localhost:3000"]
```

âš ï¸ **é‡è¦**ï¼š
- å°† `your_password` æ›¿æ¢ä¸ºä½ çš„MySQL rootå¯†ç 
- ç”Ÿäº§ç¯å¢ƒåŠ¡å¿…ä¿®æ”¹ `SECRET_KEY`

#### 5. åˆå§‹åŒ–æ•°æ®åº“

```bash
# æ–¹å¼1: ä½¿ç”¨MySQLå‘½ä»¤è¡Œ
mysql -u root -p
> source ../database/schema.sql;
> source ../database/seed_data.sql;
> USE online_mall;
> SHOW TABLES;

# æ–¹å¼2: ä½¿ç”¨è„šæœ¬
mysql -u root -p online_mall < ../database/schema.sql
mysql -u root -p online_mall < ../database/seed_data.sql
```

**éªŒè¯æ•°æ®**ï¼š
```sql
USE online_mall;

-- æ£€æŸ¥è¡¨
SHOW TABLES;

-- æ£€æŸ¥æ•°æ®
SELECT COUNT(*) FROM products;   -- åº”è¿”å›30
SELECT COUNT(*) FROM orders;     -- åº”è¿”å›33
SELECT COUNT(*) FROM users;      -- åº”è¿”å›5
SELECT COUNT(*) FROM merchants;  -- åº”è¿”å›4
```

#### 6. å¯åŠ¨åç«¯æœåŠ¡

```bash
# æ–¹å¼1: ä½¿ç”¨Pythonç›´æ¥è¿è¡Œ
python main.py

# æ–¹å¼2: ä½¿ç”¨uvicornï¼ˆæ¨èï¼‰
uvicorn main:app --reload --host 0.0.0.0 --port 8000

# æ–¹å¼3: ç”Ÿäº§ç¯å¢ƒï¼ˆå¤šè¿›ç¨‹ï¼‰
uvicorn main:app --workers 4 --host 0.0.0.0 --port 8000
```

**å¯åŠ¨å‚æ•°è¯´æ˜**ï¼š
- `--reload`ï¼šä»£ç ä¿®æ”¹è‡ªåŠ¨é‡å¯ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰
- `--host 0.0.0.0`ï¼šå…è®¸å¤–éƒ¨è®¿é—®
- `--port 8000`ï¼šæŒ‡å®šç«¯å£
- `--workers 4`ï¼šå¯åŠ¨4ä¸ªå·¥ä½œè¿›ç¨‹

#### 7. éªŒè¯å¯åŠ¨

**ç»ˆç«¯è¾“å‡º**ï¼š
```
INFO:     Uvicorn running on http://0.0.0.0:8000 (Press CTRL+C to quit)
INFO:     Started reloader process [12345] using StatReload
INFO:     Started server process [12346]
INFO:     Waiting for application startup.
INFO:     Application startup complete.
```

**è®¿é—®æµ‹è¯•**ï¼š
- APIæ–‡æ¡£ï¼šhttp://localhost:8000/docs
- å¥åº·æ£€æŸ¥ï¼šhttp://localhost:8000/health

### æ–¹å¼ä¸‰ï¼šDockeréƒ¨ç½²ï¼ˆæ¨èç”Ÿäº§ç¯å¢ƒï¼‰

#### 1. ç¡®ä¿Dockerå·²å®‰è£…

```bash
# æ£€æŸ¥Dockerç‰ˆæœ¬
docker --version
docker-compose --version
```

#### 2. å¯åŠ¨æœåŠ¡

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•æ‰§è¡Œ
cd d:\PyCharm\code\pythonProject2\sqlwork

# æ„å»ºå¹¶å¯åŠ¨æ‰€æœ‰æœåŠ¡
docker-compose up -d

# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
docker-compose ps
```

**é¢„æœŸè¾“å‡º**ï¼š
```
      Name                    Command               State           Ports
--------------------------------------------------------------------------------
mall_backend      uvicorn main:app --host 0 ...   Up      0.0.0.0:8000->8000/tcp
mall_mysql        docker-entrypoint.sh mysqld     Up      0.0.0.0:3306->3306/tcp
```

#### 3. æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹æ‰€æœ‰æœåŠ¡æ—¥å¿—
docker-compose logs -f

# åªçœ‹åç«¯æ—¥å¿—
docker-compose logs -f backend

# åªçœ‹MySQLæ—¥å¿—
docker-compose logs -f mysql
```

#### 4. åœæ­¢æœåŠ¡

```bash
# åœæ­¢æœåŠ¡ï¼ˆä¿ç•™æ•°æ®ï¼‰
docker-compose stop

# åœæ­¢å¹¶åˆ é™¤å®¹å™¨
docker-compose down

# åˆ é™¤å®¹å™¨å’Œæ•°æ®å·ï¼ˆæ…ç”¨ï¼ï¼‰
docker-compose down -v
```

#### 5. é‡å¯æœåŠ¡

```bash
# é‡å¯æ‰€æœ‰æœåŠ¡
docker-compose restart

# åªé‡å¯åç«¯
docker-compose restart backend
```

---

## å¿«é€Ÿå¼€å§‹

### ç¬¬ä¸€æ¬¡ä½¿ç”¨æµç¨‹

#### 1. å¯åŠ¨åç«¯æœåŠ¡

```bash
cd backend
python main.py
```

ç­‰å¾…çœ‹åˆ°ï¼š
```
INFO:     Application startup complete.
```

#### 2. æ‰“å¼€APIæ–‡æ¡£

æµè§ˆå™¨è®¿é—®ï¼šhttp://localhost:8000/docs

ä½ å°†çœ‹åˆ°Swagger UIç•Œé¢ï¼Œæ˜¾ç¤ºæ‰€æœ‰APIæ¥å£ã€‚

#### 3. æµ‹è¯•å¥åº·æ£€æŸ¥

åœ¨Swagger UIä¸­ï¼š
1. æ‰¾åˆ° `GET /health` æ¥å£
2. ç‚¹å‡»"Try it out"
3. ç‚¹å‡»"Execute"
4. æŸ¥çœ‹å“åº”ï¼š
```json
{
  "status": "healthy",
  "database": "connected"
}
```

#### 4. ç”¨æˆ·ç™»å½•è·å–Token

**Step 1: æ‰¾åˆ°ç™»å½•æ¥å£**
- åœ¨Swagger UIä¸­æ‰¾åˆ° `POST /api/auth/login`

**Step 2: å¡«å†™ç™»å½•ä¿¡æ¯**
```json
{
  "username": "zhang_san",
  "password": "password123",
  "role": "user"
}
```

**Step 3: æ‰§è¡Œè¯·æ±‚**
- ç‚¹å‡»"Execute"

**Step 4: å¤åˆ¶Token**
å“åº”ç¤ºä¾‹ï¼š
```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJ6aGFuZ19zYW4iLCJyb2xlIjoidXNlciIsImV4cCI6MTcwMzY4MDgwMH0.xxx",
  "token_type": "Bearer",
  "expires_in": 86400
}
```

å¤åˆ¶ `access_token` çš„å€¼ã€‚

#### 5. è®¾ç½®è®¤è¯

**Step 1: ç‚¹å‡»é¡µé¢å³ä¸Šè§’çš„ğŸ”’ AuthorizeæŒ‰é’®**

**Step 2: åœ¨å¼¹çª—ä¸­è¾“å…¥**
```
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...ï¼ˆä½ çš„tokenï¼‰
```

âš ï¸ æ³¨æ„ï¼š
- å¿…é¡»ä»¥ `Bearer ` å¼€å¤´ï¼ˆBeareråæœ‰ç©ºæ ¼ï¼‰
- ç²˜è´´å®Œæ•´çš„token

**Step 3: ç‚¹å‡»Authorizeï¼Œå†ç‚¹å‡»Close**

#### 6. æµ‹è¯•éœ€è¦è®¤è¯çš„æ¥å£

ç°åœ¨å¯ä»¥æµ‹è¯•éœ€è¦è®¤è¯çš„æ¥å£äº†ï¼Œä¾‹å¦‚ï¼š

**è·å–ä¸ªæ€§åŒ–æ¨è**ï¼š
1. æ‰¾åˆ° `GET /api/user/recommendations`
2. ç‚¹å‡»"Try it out"
3. è®¾ç½® `limit` å‚æ•°ä¸º 10
4. ç‚¹å‡»"Execute"
5. æŸ¥çœ‹æ¨èç»“æœ

**åˆ›å»ºè®¢å•**ï¼š
1. æ‰¾åˆ° `POST /api/user/orders`
2. ç‚¹å‡»"Try it out"
3. å¡«å†™è¯·æ±‚ä½“ï¼š
```json
{
  "product_id": 1,
  "quantity": 2
}
```
4. ç‚¹å‡»"Execute"
5. æŸ¥çœ‹è®¢å•åˆ›å»ºç»“æœ

---

## åŠŸèƒ½ä½¿ç”¨æŒ‡å—

### ä¹°å®¶ç«¯åŠŸèƒ½

#### 1. æµè§ˆå•†å“åˆ—è¡¨

**æ¥å£**ï¼š`GET /api/products`

**å‚æ•°**ï¼š
- `page`: é¡µç ï¼ˆé»˜è®¤1ï¼‰
- `size`: æ¯é¡µæ•°é‡ï¼ˆé»˜è®¤20ï¼‰
- `category`: ç±»ç›®ç­›é€‰ï¼ˆå¯é€‰ï¼‰

**ç¤ºä¾‹**ï¼š
```bash
curl "http://localhost:8000/api/products?page=1&size=10&category=æ•°ç "
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "items": [
      {
        "product_id": 1,
        "name": "iPhone 15 Pro",
        "price": 9999.00,
        "stock": 100,
        "category": "æ•°ç "
      }
    ],
    "total": 30,
    "page": 1,
    "size": 10
  }
}
```

#### 2. æœç´¢å•†å“

**æ¥å£**ï¼š`POST /api/user/search`

**å‚æ•°**ï¼š
- `keyword`: æœç´¢å…³é”®è¯
- `category`: ç±»ç›®ç­›é€‰
- `min_price`: æœ€ä½ä»·æ ¼
- `max_price`: æœ€é«˜ä»·æ ¼

**ç¤ºä¾‹**ï¼š
```json
{
  "keyword": "æ‰‹æœº",
  "category": "æ•°ç ",
  "min_price": 1000,
  "max_price": 10000
}
```

#### 3. è·å–ä¸ªæ€§åŒ–æ¨è â­

**æ¥å£**ï¼š`GET /api/user/recommendations`

**è¯´æ˜**ï¼š
- åŸºäºååŒè¿‡æ»¤ç®—æ³•
- éœ€è¦è‡³å°‘è´­ä¹°2ä»¶å•†å“
- æ–°ç”¨æˆ·è¿”å›çƒ­é—¨å•†å“

**ç¤ºä¾‹**ï¼š
```bash
curl -H "Authorization: Bearer {token}" \
  "http://localhost:8000/api/user/recommendations?limit=10"
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "product_id": 5,
      "name": "æ— çº¿é¼ æ ‡",
      "price": 89.00,
      "category": "æ•°ç ",
      "merchant_name": "æ•°ç ä¸“è¥åº—",
      "reason": "åŸºäºæ‚¨çš„è´­ä¹°å†å²æ¨è"
    }
  ]
}
```

#### 4. åˆ›å»ºè®¢å•

**æ¥å£**ï¼š`POST /api/user/orders`

**æµç¨‹**ï¼š
1. æ£€æŸ¥å•†å“åº“å­˜
2. è®¡ç®—è®¢å•é‡‘é¢
3. æ‰£å‡åº“å­˜
4. åˆ›å»ºè®¢å•è®°å½•

**ç¤ºä¾‹**ï¼š
```json
{
  "product_id": 1,
  "quantity": 2
}
```

**å“åº”**ï¼š
```json
{
  "code": 200,
  "message": "è®¢å•åˆ›å»ºæˆåŠŸ",
  "data": {
    "order_id": 34,
    "product_id": 1,
    "quantity": 2,
    "unit_price": 9999.00,
    "total_amount": 19998.00,
    "order_time": "2025-12-26T10:30:00"
  }
}
```

**é”™è¯¯å¤„ç†**ï¼š
```json
{
  "detail": "åº“å­˜ä¸è¶³ï¼Œå½“å‰åº“å­˜ï¼š1ï¼Œè¯·æ±‚æ•°é‡ï¼š2"
}
```

#### 5. æŸ¥çœ‹è®¢å•å†å²

**æ¥å£**ï¼š`GET /api/user/orders`

**å‚æ•°**ï¼š
- `page`: é¡µç 
- `size`: æ¯é¡µæ•°é‡

**ç¤ºä¾‹**ï¼š
```bash
curl -H "Authorization: Bearer {token}" \
  "http://localhost:8000/api/user/orders?page=1&size=10"
```

### å•†å®¶ç«¯åŠŸèƒ½

#### 1. å•†å“ç®¡ç†

**æŸ¥çœ‹å•†å“åˆ—è¡¨**ï¼š
```
GET /api/merchant/products?page=1&size=20
```

**åˆ›å»ºå•†å“**ï¼š
```json
POST /api/merchant/products

{
  "name": "æ–°å•†å“",
  "description": "å•†å“æè¿°",
  "price": 99.99,
  "stock": 100,
  "category": "æ•°ç "
}
```

**æ›´æ–°å•†å“**ï¼š
```json
PUT /api/merchant/products/{product_id}

{
  "name": "æ›´æ–°åçš„åç§°",
  "price": 89.99,
  "stock": 150
}
```

**åˆ é™¤å•†å“**ï¼š
```
DELETE /api/merchant/products/{product_id}
```

#### 2. æ•°æ®ç»Ÿè®¡

**é”€å”®è¶‹åŠ¿**ï¼š
```
GET /api/merchant/sales/trend?days=30
```

å“åº”ï¼š
```json
{
  "code": 200,
  "data": {
    "dates": ["2025-11-27", "2025-11-28", ...],
    "sales": [15, 23, 18, 31, 27, ...]
  }
}
```

**çƒ­é”€å•†å“Top10**ï¼š
```
GET /api/merchant/products/top?limit=10
```

å“åº”ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "product_id": 1,
      "name": "iPhone 15 Pro",
      "total_sales": 50,
      "total_revenue": 499950.00
    }
  ]
}
```

**ç±»ç›®é”€å”®åˆ†å¸ƒ**ï¼š
```
GET /api/merchant/category/distribution
```

å“åº”ï¼š
```json
{
  "code": 200,
  "data": [
    {
      "category": "æ•°ç ",
      "total_sales": 120,
      "total_revenue": 350000.00
    }
  ]
}
```

#### 3. AIç»è¥å»ºè®® â­

**æ¥å£**ï¼š`GET /api/merchant/ai/suggestions`

**å»ºè®®ç±»å‹**ï¼š
1. **åº“å­˜é¢„è­¦**ï¼ˆHIGHä¼˜å…ˆçº§ï¼‰
2. **æ»é”€é¢„è­¦**ï¼ˆMEDIUMä¼˜å…ˆçº§ï¼‰
3. **ä¿ƒé”€å»ºè®®**ï¼ˆMEDIUMä¼˜å…ˆçº§ï¼‰
4. **æä»·æœºä¼š**ï¼ˆLOWä¼˜å…ˆçº§ï¼‰
5. **åº“å­˜ç®¡ç†**ï¼ˆMEDIUMä¼˜å…ˆçº§ï¼‰
6. **è¡¥è´§å»ºè®®**ï¼ˆLOWä¼˜å…ˆçº§ï¼‰

**ç¤ºä¾‹å“åº”**ï¼š
```json
{
  "code": 200,
  "data": {
    "suggestions": [
      {
        "product_id": 3,
        "product_name": "å……ç”µå®20000æ¯«å®‰",
        "suggestion": "åº“å­˜ä¸è¶³ï¼Œé¢„è®¡5å¤©å”®ç½„ï¼Œå»ºè®®åŠæ—¶è¡¥è´§",
        "priority": "high",
        "metrics": {
          "recent_sales": 15,
          "previous_sales": 12,
          "change_pct": 25.0,
          "turnover_rate": 2.3,
          "current_stock": 45
        }
      },
      {
        "product_id": 10,
        "product_name": "è“ç‰™éŸ³ç®±",
        "suggestion": "è¿‘æœŸé›¶é”€é‡ï¼Œå»ºè®®é™ä»·ä¿ƒé”€æˆ–ä¼˜åŒ–å•†å“æè¿°",
        "priority": "medium",
        "metrics": {
          "recent_sales": 0,
          "current_stock": 80
        }
      }
    ]
  }
}
```

---

## APIæ¥å£ä½¿ç”¨

### ä½¿ç”¨Swagger UIï¼ˆæ¨èï¼‰

#### ä¼˜ç‚¹
- âœ… å¯è§†åŒ–ç•Œé¢
- âœ… è‡ªåŠ¨ç”Ÿæˆæ–‡æ¡£
- âœ… ä¸€é”®æµ‹è¯•
- âœ… æ”¯æŒè®¤è¯

#### ä½¿ç”¨æ­¥éª¤

**1. è®¿é—®Swagger UI**
```
http://localhost:8000/docs
```

**2. é€‰æ‹©æ¥å£**
- ç‚¹å‡»è¦æµ‹è¯•çš„æ¥å£
- å±•å¼€æ¥å£è¯¦æƒ…

**3. å¡«å†™å‚æ•°**
- ç‚¹å‡»"Try it out"
- å¡«å†™å¿…éœ€å‚æ•°
- ç‚¹å‡»"Execute"

**4. æŸ¥çœ‹ç»“æœ**
- Request URLï¼šå®é™…è¯·æ±‚åœ°å€
- Response bodyï¼šå“åº”å†…å®¹
- Response headersï¼šå“åº”å¤´
- Status codeï¼šçŠ¶æ€ç 

### ä½¿ç”¨curlå‘½ä»¤

#### ä¼˜ç‚¹
- âœ… è„šæœ¬åŒ–
- âœ… è‡ªåŠ¨åŒ–
- âœ… è·¨å¹³å°

#### ç¤ºä¾‹

**1. æ— éœ€è®¤è¯çš„æ¥å£**
```bash
# è·å–å•†å“åˆ—è¡¨
curl "http://localhost:8000/api/products?page=1&size=10"

# è·å–çƒ­é”€å•†å“
curl "http://localhost:8000/api/hot-products?limit=10"
```

**2. éœ€è¦è®¤è¯çš„æ¥å£**
```bash
# å…ˆç™»å½•è·å–token
TOKEN=$(curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"zhang_san","password":"password123","role":"user"}' \
  | jq -r '.access_token')

# ä½¿ç”¨tokenè®¿é—®æ¥å£
curl -H "Authorization: Bearer $TOKEN" \
  "http://localhost:8000/api/user/recommendations?limit=10"
```

**3. POSTè¯·æ±‚**
```bash
# åˆ›å»ºè®¢å•
curl -X POST "http://localhost:8000/api/user/orders" \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"product_id":1,"quantity":2}'
```

### ä½¿ç”¨Postman

#### å¯¼å…¥Collection

**1. åˆ›å»ºCollection**
- æ‰“å¼€Postman
- ç‚¹å‡»"New Collection"
- å‘½åä¸º"ç½‘ä¸Šå•†åŸAPI"

**2. æ·»åŠ è¯·æ±‚**

**ç™»å½•è¯·æ±‚**ï¼š
```
POST http://localhost:8000/api/auth/login
Headers:
  Content-Type: application/json
Body (raw JSON):
{
  "username": "zhang_san",
  "password": "password123",
  "role": "user"
}
```

**ä¿å­˜Token**ï¼š
- åœ¨Testsæ ‡ç­¾é¡µæ·»åŠ ï¼š
```javascript
var data = pm.response.json();
pm.environment.set("token", data.access_token);
```

**ä½¿ç”¨Token**ï¼š
```
GET http://localhost:8000/api/user/recommendations?limit=10
Headers:
  Authorization: Bearer {{token}}
```

---

## æµ‹è¯•è´¦å·

### ä¹°å®¶è´¦å·

| ç”¨æˆ·å | å¯†ç  | è¯´æ˜ |
|--------|------|------|
| zhang_san | password123 | æœ‰è´­ä¹°å†å²ï¼Œæ¨èç®—æ³•æœ‰æ•ˆ |
| li_si | password123 | æœ‰è´­ä¹°å†å² |
| wang_wu | password123 | æœ‰è´­ä¹°å†å² |
| zhao_liu | password123 | æ™®é€šç”¨æˆ· |
| sun_qi | password123 | æ™®é€šç”¨æˆ· |

### å•†å®¶è´¦å·

| å•†å®¶åç§° | å¯†ç  | ä¸»è¥ç±»ç›® | å•†å“æ•°é‡ |
|---------|------|---------|----------|
| æ•°ç ä¸“è¥åº— | merchant123 | æ•°ç äº§å“ | 10ä»¶ |
| æ—¶å°šæœé¥°é¦† | merchant123 | æœè£…é‹å¸½ | 8ä»¶ |
| å®¶å±…ç”Ÿæ´»åº— | merchant123 | å®¶å±…ç”¨å“ | 7ä»¶ |
| ç¾é£Ÿç‰¹äº§é“º | merchant123 | é£Ÿå“ç‰¹äº§ | 5ä»¶ |

### ç™»å½•ç¤ºä¾‹

**ä¹°å®¶ç™»å½•**ï¼š
```json
{
  "username": "zhang_san",
  "password": "password123",
  "role": "user"
}
```

**å•†å®¶ç™»å½•**ï¼š
```json
{
  "username": "æ•°ç ä¸“è¥åº—",
  "password": "merchant123",
  "role": "merchant"
}
```

---

## å¸¸è§é—®é¢˜

### Q1: Pythonè™šæ‹Ÿç¯å¢ƒä¸­æ— æ³•è¯†åˆ«npm/nodeå‘½ä»¤

**é”™è¯¯ä¿¡æ¯**ï¼š
```
(.venv) PS D:\project> npm install
npm : The term 'npm' is not recognized as the name of a cmdlet...
```

**åŸå› **ï¼š
Pythonè™šæ‹Ÿç¯å¢ƒæ¿€æ´»åä¼šä¿®æ”¹PATHç¯å¢ƒå˜é‡ï¼Œå¯èƒ½ä¼šå±è”½ç³»ç»Ÿçš„Node.jsè·¯å¾„ã€‚

**ç—‡çŠ¶**ï¼š
- åœ¨ç³»ç»Ÿç»ˆç«¯å¯ä»¥è¿è¡Œï¼š`PS C:\Users\> node --version` âœ…
- åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ— æ³•è¿è¡Œï¼š`(.venv) PS> node --version` âŒ

**è§£å†³æ–¹æ³•**ï¼š

**æ–¹æ¡ˆ1ï¼šåœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰‹åŠ¨æ·»åŠ Node.jsåˆ°PATHï¼ˆæ¨èï¼‰**
```powershell
# åœ¨è™šæ‹Ÿç¯å¢ƒä¸­æ‰§è¡Œ
$env:Path += ";C:\Program Files\nodejs\"

# éªŒè¯
node --version
npm --version
```

**æ–¹æ¡ˆ2ï¼šé€€å‡ºè™šæ‹Ÿç¯å¢ƒåå®‰è£…å‰ç«¯ä¾èµ–**
```powershell
# 1. é€€å‡ºè™šæ‹Ÿç¯å¢ƒ
deactivate

# 2. å®‰è£…å‰ç«¯ä¾èµ–
cd frontend
npm install

# 3. å›åˆ°é¡¹ç›®æ ¹ç›®å½•
cd ..

# 4. é‡æ–°æ¿€æ´»è™šæ‹Ÿç¯å¢ƒï¼ˆå¦‚éœ€è¦ï¼‰
.venv\Scripts\Activate.ps1
```

**æ–¹æ¡ˆ3ï¼šä¿®æ”¹è™šæ‹Ÿç¯å¢ƒæ¿€æ´»è„šæœ¬ï¼ˆä¸€åŠ³æ°¸é€¸ï¼‰**
```powershell
# 1. ç¼–è¾‘è™šæ‹Ÿç¯å¢ƒçš„æ¿€æ´»è„šæœ¬
notepad .venv\Scripts\Activate.ps1

# 2. åœ¨æ–‡ä»¶æœ«å°¾æ·»åŠ ï¼š
# Add Node.js to PATH
$env:Path += ";C:\Program Files\nodejs\"

# 3. ä¿å­˜åé‡æ–°æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
deactivate
.venv\Scripts\Activate.ps1
```

**æ–¹æ¡ˆ4ï¼šåˆ†å¼€ä¸¤ä¸ªç»ˆç«¯ï¼ˆæœ€ä½³å®è·µï¼‰**
- **ç»ˆç«¯1ï¼ˆåç«¯ï¼‰**ï¼šä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡ŒPython
- **ç»ˆç«¯2ï¼ˆå‰ç«¯ï¼‰**ï¼šä¸ä½¿ç”¨è™šæ‹Ÿç¯å¢ƒè¿è¡Œnpm

```powershell
# ç»ˆç«¯1 - åç«¯ï¼ˆéœ€è¦è™šæ‹Ÿç¯å¢ƒï¼‰
cd backend
.venv\Scripts\Activate.ps1  # æ¿€æ´»è™šæ‹Ÿç¯å¢ƒ
python main.py

# ç»ˆç«¯2 - å‰ç«¯ï¼ˆä¸éœ€è¦è™šæ‹Ÿç¯å¢ƒï¼‰
cd frontend
npm run dev
```

**æ³¨æ„äº‹é¡¹**ï¼š
- Node.jsæ˜¯ç³»ç»Ÿçº§å·¥å…·ï¼Œä¸åº”è¯¥åœ¨Pythonè™šæ‹Ÿç¯å¢ƒä¸­ä½¿ç”¨
- å‰ç«¯å¼€å‘å¯ä»¥åœ¨éè™šæ‹Ÿç¯å¢ƒä¸‹è¿›è¡Œ
- ä½¿ç”¨ `start.ps1` è„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†è¿™äº›é—®é¢˜

---

### Q2: å¯åŠ¨æ—¶æç¤º"è¿æ¥æ•°æ®åº“å¤±è´¥"

**é”™è¯¯ä¿¡æ¯**ï¼š
```
sqlalchemy.exc.OperationalError: (pymysql.err.OperationalError) (2003, "Can't connect to MySQL server on 'localhost'")
```

**åŸå› **ï¼š
1. MySQLæœåŠ¡æœªå¯åŠ¨
2. æ•°æ®åº“ä¸å­˜åœ¨
3. å¯†ç é”™è¯¯
4. ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ³•**ï¼š

**æ£€æŸ¥MySQLæœåŠ¡**ï¼š
```bash
# Windows
Get-Service MySQL*

# å¯åŠ¨æœåŠ¡
net start MySQL80

# Linux
sudo systemctl status mysql
sudo systemctl start mysql
```

**éªŒè¯æ•°æ®åº“**ï¼š
```sql
mysql -u root -p
SHOW DATABASES;
USE online_mall;
SHOW TABLES;
```

**æ£€æŸ¥é…ç½®**ï¼š
```bash
# æ£€æŸ¥.envæ–‡ä»¶æˆ–config.py
# ç¡®ä¿å¯†ç æ­£ç¡®
DATABASE_URL=mysql+pymysql://root:your_password@localhost:3306/online_mall
```

### Q3: å¯¼å…¥ä¾èµ–æ—¶å‡ºç°é”™è¯¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR: Could not find a version that satisfies the requirement fastapi==0.109.0
```

**è§£å†³æ–¹æ³•**ï¼š

**æ–¹å¼1: ä½¿ç”¨å›½å†…é•œåƒæº**
```bash
pip install -r requirements.txt -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**æ–¹å¼2: é€ä¸ªå®‰è£…**
```bash
pip install fastapi uvicorn sqlalchemy pymysql -i https://pypi.tuna.tsinghua.edu.cn/simple
```

**æ–¹å¼3: å‡çº§pip**
```bash
python -m pip install --upgrade pip
pip install -r requirements.txt
```

### Q4: Tokenè®¤è¯å¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```json
{
  "detail": "Could not validate credentials"
}
```

**åŸå› **ï¼š
1. Tokenè¿‡æœŸï¼ˆ24å°æ—¶ï¼‰
2. Tokenæ ¼å¼é”™è¯¯
3. æœªæºå¸¦Token

**è§£å†³æ–¹æ³•**ï¼š

**é‡æ–°ç™»å½•è·å–Token**ï¼š
```bash
curl -X POST "http://localhost:8000/api/auth/login" \
  -H "Content-Type: application/json" \
  -d '{"username":"zhang_san","password":"password123","role":"user"}'
```

**æ£€æŸ¥è¯·æ±‚å¤´æ ¼å¼**ï¼š
```
Authorization: Bearer eyJhbGc...ï¼ˆæ³¨æ„Beareråæœ‰ç©ºæ ¼ï¼‰
```

### Q5: æ¨èæ¥å£è¿”å›çƒ­é—¨å•†å“è€Œä¸æ˜¯ä¸ªæ€§åŒ–æ¨è

**è¯´æ˜**ï¼šè¿™æ˜¯æ­£å¸¸çš„å†·å¯åŠ¨ç­–ç•¥

**åŸå› **ï¼š
- ç”¨æˆ·æ²¡æœ‰è´­ä¹°å†å²
- è´­ä¹°å•†å“å°‘äº2ä»¶

**è§£å†³æ–¹æ³•**ï¼š
1. ä½¿ç”¨æœ‰è´­ä¹°å†å²çš„æµ‹è¯•è´¦å· `zhang_san`
2. å…ˆåˆ›å»ºå‡ ä¸ªè®¢å•å†æµ‹è¯•æ¨è

### Q6: Dockerå¯åŠ¨åæ— æ³•è®¿é—®

**é”™è¯¯ä¿¡æ¯**ï¼š
```
curl: (7) Failed to connect to localhost port 8000
```

**è§£å†³æ–¹æ³•**ï¼š

**æ£€æŸ¥å®¹å™¨çŠ¶æ€**ï¼š
```bash
docker-compose ps
```

**æŸ¥çœ‹æ—¥å¿—**ï¼š
```bash
docker-compose logs backend
```

**æ£€æŸ¥ç«¯å£æ˜ å°„**ï¼š
```bash
# Windows
netstat -ano | findstr :8000

# Linux
netstat -tlnp | grep :8000
```

**é‡å¯å®¹å™¨**ï¼š
```bash
docker-compose restart backend
```

### Q7: æ•°æ®åº“è¡¨åˆ›å»ºå¤±è´¥

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR 1064 (42000): You have an error in your SQL syntax
```

**è§£å†³æ–¹æ³•**ï¼š

**ç¡®ä¿ä½¿ç”¨æ­£ç¡®çš„MySQLç‰ˆæœ¬**ï¼š
```bash
mysql --version  # éœ€è¦8.0+
```

**æ‰‹åŠ¨æ‰§è¡ŒSQL**ï¼š
```bash
mysql -u root -p
> CREATE DATABASE IF NOT EXISTS online_mall;
> USE online_mall;
> source /path/to/schema.sql;
```

**æ£€æŸ¥æ–‡ä»¶è·¯å¾„**ï¼š
```bash
# Windowsä½¿ç”¨ç»å¯¹è·¯å¾„
source d:/PyCharm/code/pythonProject2/sqlwork/database/schema.sql;
```

### Q8: å‰ç«¯æ— æ³•è¿æ¥åç«¯

**é”™è¯¯ä¿¡æ¯**ï¼š
```
Access to XMLHttpRequest has been blocked by CORS policy
```

**è§£å†³æ–¹æ³•**ï¼š

**æ£€æŸ¥CORSé…ç½®**ï¼š
```python
# backend/config.py
CORS_ORIGINS = [
    "http://localhost:5173",  # å‰ç«¯å¼€å‘æœåŠ¡å™¨
    "http://localhost:3000",
]
```

**ä¸´æ—¶å…è®¸æ‰€æœ‰æ¥æº**ï¼ˆä»…å¼€å‘ç¯å¢ƒï¼‰ï¼š
```python
# backend/main.py
app.add_middleware(
    CORSMiddleware,
    allow_origins=["*"],  # ç”Ÿäº§ç¯å¢ƒæ”¹å›é™åˆ¶åˆ—è¡¨
    allow_credentials=True,
    allow_methods=["*"],
    allow_headers=["*"],
)
```

### Q9: ç«¯å£è¢«å ç”¨

**é”™è¯¯ä¿¡æ¯**ï¼š
```
ERROR: [Errno 10048] error while attempting to bind on address ('0.0.0.0', 8000)
```

**è§£å†³æ–¹æ³•**ï¼š

**æŸ¥æ‰¾å ç”¨è¿›ç¨‹**ï¼š
```bash
# Windows
netstat -ano | findstr :8000
taskkill /PID <è¿›ç¨‹ID> /F

# Linux
lsof -i :8000
kill -9 <è¿›ç¨‹ID>
```

**ä½¿ç”¨å…¶ä»–ç«¯å£**ï¼š
```bash
uvicorn main:app --port 8001
```

---

## æ€§èƒ½ä¼˜åŒ–

### æ•°æ®åº“ä¼˜åŒ–

#### 1. å®šæœŸåˆ†æè¡¨
```sql
ANALYZE TABLE products;
ANALYZE TABLE orders;
```

#### 2. ä¼˜åŒ–æ…¢æŸ¥è¯¢
```sql
-- å¼€å¯æ…¢æŸ¥è¯¢æ—¥å¿—
SET GLOBAL slow_query_log = 'ON';
SET GLOBAL long_query_time = 2;

-- æŸ¥çœ‹æ…¢æŸ¥è¯¢
SHOW VARIABLES LIKE 'slow_query%';
```

#### 3. å¢åŠ è¿æ¥æ± å¤§å°
```python
# database.py
engine = create_engine(
    settings.DATABASE_URL,
    pool_size=20,          # å¢åŠ è¿æ¥æ± å¤§å°
    max_overflow=40,       # å¢åŠ æº¢å‡ºè¿æ¥æ•°
    pool_pre_ping=True
)
```

### APIä¼˜åŒ–

#### 1. æ·»åŠ ç¼“å­˜
```python
from functools import lru_cache

@lru_cache(maxsize=128)
def get_hot_products(limit: int = 10):
    # ç¼“å­˜çƒ­é—¨å•†å“æŸ¥è¯¢
    pass
```

#### 2. ä½¿ç”¨å¼‚æ­¥æ•°æ®åº“
```python
# å®‰è£…å¼‚æ­¥é©±åŠ¨
pip install aiomysql

# ä¿®æ”¹æ•°æ®åº“è¿æ¥
DATABASE_URL = "mysql+aiomysql://..."
```

#### 3. æ·»åŠ é™æµ
```python
from slowapi import Limiter
from slowapi.util import get_remote_address

limiter = Limiter(key_func=get_remote_address)

@app.get("/api/products")
@limiter.limit("100/minute")
async def get_products():
    pass
```

### å‰ç«¯ä¼˜åŒ–

#### 1. è·¯ç”±æ‡’åŠ è½½
```javascript
const routes = [
  {
    path: '/dashboard',
    component: () => import('@/views/Dashboard.vue')
  }
]
```

#### 2. ç»„ä»¶æŒ‰éœ€å¯¼å…¥
```javascript
import { ElButton, ElTable } from 'element-plus'
```

#### 3. å›¾ç‰‡æ‡’åŠ è½½
```vue
<img v-lazy="product.image" />
```

---

## æ‰©å±•å¼€å‘

### æ·»åŠ æ–°çš„APIæ¥å£

#### 1. å®šä¹‰Pydantic Schema
```python
# models/schemas.py
class CartItemCreate(BaseModel):
    product_id: int
    quantity: int = Field(gt=0)
```

#### 2. åˆ›å»ºè·¯ç”±å‡½æ•°
```python
# api/user.py
@router.post("/cart")
async def add_to_cart(
    item: CartItemCreate,
    current_user: dict = Depends(get_current_user),
    db: Session = Depends(get_db)
):
    # å®ç°æ·»åŠ è´­ç‰©è½¦é€»è¾‘
    pass
```

#### 3. è®¿é—®APIæ–‡æ¡£
æ‰“å¼€ http://localhost:8000/docs æŸ¥çœ‹æ–°æ¥å£

### æ·»åŠ æ–°çš„æ•°æ®è¡¨

#### 1. åˆ›å»ºORMæ¨¡å‹
```python
# models/models.py
class Cart(Base):
    __tablename__ = "carts"
    
    cart_id = Column(Integer, primary_key=True)
    user_id = Column(Integer, ForeignKey('users.user_id'))
    product_id = Column(Integer, ForeignKey('products.product_id'))
    quantity = Column(Integer, default=1)
    created_at = Column(TIMESTAMP, server_default=func.now())
```

#### 2. åˆ›å»ºæ•°æ®åº“è¡¨
```sql
CREATE TABLE carts (
    cart_id INT PRIMARY KEY AUTO_INCREMENT,
    user_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT DEFAULT 1,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id),
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);
```

### é›†æˆRedisç¼“å­˜

#### 1. å®‰è£…ä¾èµ–
```bash
pip install redis aioredis
```

#### 2. é…ç½®Redis
```python
# config.py
REDIS_URL = "redis://localhost:6379/0"
```

#### 3. ç¼“å­˜çƒ­é—¨å•†å“
```python
import redis

redis_client = redis.Redis.from_url(settings.REDIS_URL)

def get_hot_products_cached(limit: int = 10):
    # å°è¯•ä»ç¼“å­˜è·å–
    cache_key = f"hot_products:{limit}"
    cached = redis_client.get(cache_key)
    
    if cached:
        return json.loads(cached)
    
    # æŸ¥è¯¢æ•°æ®åº“
    products = query_hot_products(limit)
    
    # å†™å…¥ç¼“å­˜ï¼ˆè¿‡æœŸæ—¶é—´1å°æ—¶ï¼‰
    redis_client.setex(cache_key, 3600, json.dumps(products))
    
    return products
```

---

## ä¸‹ä¸€æ­¥å­¦ä¹ 

### æ¨èæ‰©å±•åŠŸèƒ½

1. **è´­ç‰©è½¦åŠŸèƒ½**
   - æ·»åŠ åˆ°è´­ç‰©è½¦
   - æ‰¹é‡ä¸‹å•
   - è´­ç‰©è½¦ç®¡ç†

2. **è¯„ä»·ç³»ç»Ÿ**
   - å•†å“è¯„åˆ†
   - è¯„è®ºå±•ç¤º
   - è¯„ä»·ç»Ÿè®¡

3. **ä¼˜æƒ åˆ¸åŠŸèƒ½**
   - ä¼˜æƒ åˆ¸å‘æ”¾
   - æ»¡å‡è§„åˆ™
   - ä½¿ç”¨é™åˆ¶

4. **ç‰©æµè·Ÿè¸ª**
   - ç‰©æµçŠ¶æ€
   - ç‰©æµä¿¡æ¯
   - ç­¾æ”¶ç¡®è®¤

5. **å®æ—¶é€šçŸ¥**
   - WebSocketæ¨é€
   - è®¢å•é€šçŸ¥
   - æ¶ˆæ¯æé†’

### å­¦ä¹ èµ„æº

- **FastAPIå®˜æ–¹æ–‡æ¡£**ï¼šhttps://fastapi.tiangolo.com/zh/
- **SQLAlchemyæ•™ç¨‹**ï¼šhttps://docs.sqlalchemy.org/
- **Vue3å®˜æ–¹æ–‡æ¡£**ï¼šhttps://cn.vuejs.org/
- **EChartsç¤ºä¾‹**ï¼šhttps://echarts.apache.org/examples/

---

## æŠ€æœ¯æ”¯æŒ

### è·å–å¸®åŠ©

1. **æŸ¥çœ‹æ–‡æ¡£**
   - å‰ç«¯å¼€å‘æ–‡æ¡£
   - åç«¯å¼€å‘æ–‡æ¡£
   - é¡¹ç›®æ€»æ–‡æ¡£
   - æœ¬ä½¿ç”¨è¯´æ˜æ–‡æ¡£

2. **è¿è¡Œæµ‹è¯•**
```bash
cd backend
python test_api.py
```

3. **æŸ¥çœ‹æ—¥å¿—**
   - åç«¯æ—¥å¿—è¾“å‡ºåœ¨ç»ˆç«¯
   - æ•°æ®åº“æ…¢æŸ¥è¯¢æ—¥å¿—
   - Dockerå®¹å™¨æ—¥å¿—

4. **è®¿é—®APIæ–‡æ¡£**
   - Swagger UI: http://localhost:8000/docs
   - ReDoc: http://localhost:8000/redoc

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼å¦‚æœ‰é—®é¢˜ï¼Œè¯·å‚è€ƒæ–‡æ¡£æˆ–æäº¤Issueã€‚ğŸ‰**
